@{
    Layout = null;
}

@addTagHelper *, Microsoft.AspNetCore.Mvc.TagHelpers
@model CDN.Directory.Core.Entities.Member

@{
    ViewData["Title"] = "Edit Member";
    var skillsets = ViewData["Skillsets"] as List<CDN.Directory.Core.Entities.SkillsetMaster>;
    var hobbies = ViewData["Hobbies"] as List<CDN.Directory.Core.Entities.HobbyMaster>;
    var selectedSkillsets = ViewData["SelectedSkillsets"] as List<int>;
    var selectedHobbies = ViewData["SelectedHobbies"] as List<int>;
}

<head>
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/css/bootstrap.min.css" rel="stylesheet">
    <link rel="stylesheet" href="~/css/site.css" />
    <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/choices.js/public/assets/styles/choices.min.css" />
    <script src="https://cdn.jsdelivr.net/npm/choices.js/public/assets/scripts/choices.min.js"></script>

    <style>
        .choices__list--dropdown {
            background-color: #343a40 !important;
            color: white !important;
        }

            .choices__list--dropdown .choices__item {
                background-color: #343a40 !important;
                color: white !important;
            }

            .choices__list--dropdown .choices__item--selectable.is-highlighted {
                background-color: #495057 !important;
                color: white !important;
            }

        .choices__inner {
            background-color: #343a40 !important;
            color: white !important;
        }
    </style>
</head>

<div class="navbar-container">
    <a href="@Url.Action("Index")">Home</a>
    <a href="@Url.Action("Create")">Add Member</a>
</div>

<div class="container text-center">
    <h2>Edit Member</h2>

    <form asp-action="Edit" method="post">
        <input type="hidden" asp-for="Id" />

        <input asp-for="Username" class="form-control" placeholder="Username" />
        <input asp-for="Email" class="form-control" placeholder="Email" />
        <input asp-for="PhoneNumber" class="form-control" placeholder="Phone Number" />

        <select id="skillsetIds" name="skillsetIds" multiple class="form-select">
            @foreach (var skill in skillsets)
            {
                <option value="@skill.Id" selected="@selectedSkillsets.Contains(skill.Id)">
                    @skill.Name
                </option>
            }
        </select>

        <select id="hobbyIds" name="hobbyIds" multiple class="form-select">
            @foreach (var hobby in hobbies)
            {
                <option value="@hobby.Id" selected="@selectedHobbies.Contains(hobby.Id)">
                    @hobby.Name
                </option>
            }
        </select>

        <button type="submit" class="btn btn-primary">Save</button>
        <a asp-action="Index" class="btn btn-secondary">Back to List</a>
    </form>
</div>

<script>
    const skillsetSelect = new Choices('#skillsetIds', {
        removeItemButton: true,
        searchResultLimit: 10,
        searchPlaceholderValue: 'Type to search skillsets...',
        placeholder: true,
        placeholderValue: 'Select skillsets'
    });

    const hobbySelect = new Choices('#hobbyIds', {
        removeItemButton: true,
        searchResultLimit: 10,
        searchPlaceholderValue: 'Type to search hobbies...',
        placeholder: true,
        placeholderValue: 'Select hobbies'
    });
</script>
